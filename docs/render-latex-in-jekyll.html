<!DOCTYPE html>
<html lang="en">
    <head>
	<meta charset="utf-8">
	<title>Rendering LaTeX in Jekyll pages - Tech, tales and imagery</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Tech, tales and imagery" property="og:site_name">
  
    <meta content="Rendering LaTeX in Jekyll pages" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="A technical blog" property="og:description">
  
  
    <meta content="https://Niximagery.github.io/render-latex-in-jekyll" property="og:url">
  
  
    <meta content="2020-06-11T08:24:00+01:00" property="article:published_time">
    <meta content="https://Niximagery.github.io/about/" property="article:author">
  
  
    <meta content="https://Niximagery.github.io/assets/img/R0000558.jpg" property="og:image">
  
  
    
  
  
    
    <meta content="Jekyll" property="article:tag">
    
    <meta content="LaTeX" property="article:tag">
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@Niximagery">
    <meta name="twitter:creator" content="@NixImagery">
  
    <meta name="twitter:title" content="Rendering LaTeX in Jekyll pages">
  
  
    <meta name="twitter:url" content="https://Niximagery.github.io/render-latex-in-jekyll">
  
  
    <meta name="twitter:description" content="A technical blog">
  
  
    <meta name="twitter:image:src" content="https://Niximagery.github.io/assets/img/R0000558.jpg">
  

	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-touch-icon-144x144.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/brands.min.css">
  <!-- Academicons -->
  <link rel="stylesheet" href="/assets/fonts/academicons/css/academicons.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/search.css">

  <link rel="me" href="https://mastodon.scot/@niximagery">


  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">

  <!-- The loading of KaTeX is deferred to speed up page rendering -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>

  <!-- To automatically render math in text elements, include the auto-render extension: -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
      onload="renderMathInElement(document.body);"></script>


<!-- Buy me a coffee -->
<script data-name="BMC-Widget" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="cullaloe" data-description="Helpful? Buy me a coffee!" data-message="" data-color="#5F7FFF" data-position="right" data-x_margin="18" data-y_margin="18"></script>
<!-- /Buy me a coffee -->

</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <p>cullaloe.com<br/>Tech, tales and imagery</p>
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/nick-hood.jpg" alt="Nick Hood"></a>
      </div>
      <!-- <div class="author-name">by <a href="/about" target="_self" class="plain">Nick Hood</a></div> -->
      <div class="search" id="js-search">
        <input type="text" placeholder="type to search..." class="search__input" id="js-search__input">
      </div>
    </div>
    <ul class="search__results" id="js-search__results"></ul>
</header> <!-- End Header -->

  <footer>
    <section class="contact">
      <h3 class="contact-title">Navigate</h3>
      <ul>
        <li><a href="/" target="_self" title="Home"><i class="fa fa-home" aria-hidden="true"></i></a></li>
        <li><a href="/about" target="_self" title="About"><i class="fa fa-info" aria-hidden="true"></i></a></li>
        <li><a href="/tags" target="_self" title="Tags and Topics"><i class="fa fa-tags" aria-hidden="true"></i></a></li>
        <li><a href="//static.cullaloe.net/Research" target="_blank" title="My research diary (login required)"><i class="fa fa-mortar-board" aria-hidden="true"></i></a></li>
        <li><a href="/feed.xml" target="_blank" title="RSS XML feed"><i class="fa fa-rss" aria-hidden="true"></i></a></li>
      </ul>
    </section> <!-- End Section links -->
    <section class="contact">
      <h3 class="contact-title">Connect</h3>
      <ul>
        
        <li><a href="https://orcid.org/0000-0001-7891-9736" target="_blank"><i class="ai ai-orcid-square" aria-hidden="true"></i></a></li>
        
        
        <li class="github"><a href="http://github.com/NixImagery" target="_blank"><i class="fab fa-github"></i></a></li>
        
        
        <li><a href="https://www.researchgate.net/profile/Nick-Hood" target="_blank"><i class="ai ai-researchgate" aria-hidden="true"></i></a></li>
        
        
        <li class="linkedin"><a href="https://in.linkedin.com/in/Niximagery" target="_blank"><i class="fab fa-linkedin"></i></a></li>
        
        
        <li><a href="https://facebook.com/NixImagery" target="_blank"><i class="fab fa-facebook" aria-hidden="true"></i></a></li>
        
        
        <li><a href="https://instagram.com/NixImagery" target="_blank"><i class="fab fa-instagram" aria-hidden="true"></i></a></li>
        
        
          <li><a href="https://mastodon.scot/@NixImagery" target="_blank"><i class="fab fa-mastodon" aria-hidden="true"></i></a></li>
        
        
          <li><a href="https://twitter.com/NixImagery" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i></a></li>
        
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2023 &copy; Nick Hood</p>
      <hr>Worried about online abuse? <a href="https://www.ceop.police.uk/safety-centre/">Report it to CEOP</a>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->

<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <figure>
        <img class="page-image" src=/assets/img/R0000558.jpg alt="Rendering LaTeX in Jekyll pages">
        
          <figcaption>Barkway barley
            
              <br/><div class="attrib">Nick Hood</div>
            
          </figcaption>
        
      </figure>
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Rendering LaTeX in Jekyll pages</h1>
        <div class="page-date"><span>2020, Jun 11&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <p>I wanted to render a formula for standard deviation on a page in a site built on Jekyll. Sal Khan’s <a href="https://www.khanacademy.org/">Khan Academy</a> has tackled a similar problem and developed their own solution. Not only have they done that, but they have made it available to the world under an MIT Licence. That solution is <a href="https://katex.org/">KaTeX</a>.</p>

<h2 id="katex">\(\KaTeX\)</h2>
<p>Described as “The fastest math typesetting library for the web”, it has no dependencies and renders very quickly on all major browsers. The API is simple and openly accessible, with javascript libraries publicly hosted in a CDN. It is also implemented in <a href="https://kramdown.gettalong.org/">kramdown</a>, the MIT-licensed markdown parser, which makes it an ideal solution for sites that are built on Jekyll, such as those hosted on github pages.</p>

<p>To implement it in a Jekyll site, the markdown parser should be set in config.yml:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">markdown</span><span class="pi">:</span> <span class="s">kramdown</span>
</code></pre></div></div>
<p>In the <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> section, perhaps in the included file <code class="language-plaintext highlighter-rouge">_includes/head.html</code>, add the KaTeX libraries and css:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">&lt;!-- KaTeX --&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"</span> <span class="na">integrity=</span><span class="s">"sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- The loading of KaTeX is deferred to speed up page rendering --&gt;</span>
  <span class="nt">&lt;script </span><span class="na">defer</span> <span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"</span> <span class="na">integrity=</span><span class="s">"sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>

  <span class="c">&lt;!-- To automatically render math in text elements, include the auto-render extension: --&gt;</span>
  <span class="nt">&lt;script </span><span class="na">defer</span> <span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"</span> <span class="na">integrity=</span><span class="s">"sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span>
      <span class="na">onload=</span><span class="s">"renderMathInElement(document.body);"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>

<p>In my implementation, I set a flag in the yaml header of any page that requires \(\LaTeX\), for example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Render LaTeX in Jekyll pages</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2020-06-11 08:24</span>
<span class="na">published</span><span class="pi">:</span> <span class="s">yes</span>
<span class="na">katex</span><span class="pi">:</span> <span class="s">yes</span>
<span class="na">tags</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">Jekyll</span>
<span class="pi">-</span> <span class="s">LaTeX</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>Then conditionally output the header code above only in pages that need to load the css and script:</p>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">{%</span><span class="w"> </span><span class="nt">if</span><span class="w"> </span><span class="nv">page</span><span class="p">.</span><span class="nv">katex</span><span class="w"> </span><span class="cp">%}</span>
  &lt;!-- KaTeX --&gt;
  .
  . etc.
  .
<span class="cp">{%</span><span class="w"> </span><span class="nt">endif</span><span class="w"> </span><span class="cp">%}</span>

</code></pre></div></div>
<h2 id="using-it">Using it</h2>
<p>Having set the <code class="language-plaintext highlighter-rouge">katex</code> flag, I can now type LaTeX code either as display (slightly larger and in its own block on the page), or inline:</p>

<div class="language-tex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">$$</span><span class="nv">\LaTeX</span><span class="nb"> code</span><span class="p">$$</span>     <span class="c">% (for inline)</span>
<span class="k">\\</span>(<span class="k">\LaTeX</span> code<span class="k">\\</span>)   <span class="c">% (also for inline)</span>
<span class="k">\\</span><span class="na">[\LaTeX code\\]</span>   <span class="c">% (for display)</span>
</code></pre></div></div>
<p>The \(\KaTeX\) script converts the <code class="language-plaintext highlighter-rouge">$$</code> code above into either <code class="language-plaintext highlighter-rouge">\\(</code> inline or <code class="language-plaintext highlighter-rouge">\\[</code> display syntax
which is output as html:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>\(\LaTeX code\)     % (inline)<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>\[\LaTeX code\]     % (display)<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>
<p>and renders thus:</p>

<p>\(\LaTeX code\)
\[\LaTeX code\]</p>

<h2 id="example-binomial-coefficient">Example: binomial coefficient</h2>
<p>In the markdown for this page, if I type:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\\[
    \binom{n}{k} = \frac{n!}{k!(n-k)!}
\\]
</code></pre></div></div>

<p>Jekyll and kramdown will output this html:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
\[
    \binom{n}{k} = \frac{n!}{k!(n-k)!}
\]<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>In the client browser, the KaTeX javascript will render thus:
\[
    \binom{n}{k} = \frac{n!}{k!(n-k)!}
\]</p>

<h2 id="caveats">Caveats</h2>
<p>Notice this solution does not render \(\LaTeX\) from the server side. All of the rendering is done on the client using the javascript loaded in the <code class="language-plaintext highlighter-rouge">head</code> of the page. It just does it very, very quickly.</p>

      <div class="page-footer">
        <div class="page-share">Share this post on 
          <a href="https://twitter.com/intent/tweet?text=Rendering LaTeX in Jekyll pages&url=https://Niximagery.github.io/render-latex-in-jekyll" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a> or 
          <a href="https://facebook.com/sharer.php?u=https://Niximagery.github.io/render-latex-in-jekyll" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>, or maybe 
          <a target="_blank" href="https://www.buymeacoffee.com/cullaloe">Buy me a coffee</a>
        </div>
        <div class="page-tag">
          
            <a href="/tags#Jekyll" class="tag">&#35; Jekyll</a>
          
            <a href="/tags#LaTeX" class="tag">&#35; LaTeX</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//cullaloe-gh.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'G-HRRCR9KGPW', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

	<!-- Scripts -->
  <!-- Search Js -->
<script src="/assets/js/search.js"></script>
  
</body>
</html>
