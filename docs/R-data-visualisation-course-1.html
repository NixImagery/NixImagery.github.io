<!DOCTYPE html>
<html lang="en">
    <head>
	<meta charset="utf-8">
	<title>Statistics and Visualisation with R - Tech, tales and imagery</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Tech, tales and imagery" property="og:site_name">
  
    <meta content="Statistics and Visualisation with R" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="A technical blog" property="og:description">
  
  
    <meta content="http://localhost:4000/R-data-visualisation-course-1" property="og:url">
  
  
    <meta content="2020-06-02T20:32:00+01:00" property="article:published_time">
    <meta content="http://localhost:4000/about/" property="article:author">
  
  
    <meta content="http://localhost:4000/assets/img/pirate-ship-at-sea.jpg" property="og:image">
  
  
    
  
  
    
    <meta content="Data" property="article:tag">
    
    <meta content="R" property="article:tag">
    
    <meta content="CPD" property="article:tag">
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@Niximagery">
    <meta name="twitter:creator" content="@NixImagery">
  
    <meta name="twitter:title" content="Statistics and Visualisation with R">
  
  
    <meta name="twitter:url" content="http://localhost:4000/R-data-visualisation-course-1">
  
  
    <meta name="twitter:description" content="A technical blog">
  
  
    <meta name="twitter:image:src" content="http://localhost:4000/assets/img/pirate-ship-at-sea.jpg">
  

	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-touch-icon-144x144.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/brands.min.css">
  <!-- Academicons -->
  <link rel="stylesheet" href="/assets/fonts/academicons/css/academicons.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/search.css">

  <link rel="me" href="https://mastodon.scot/@niximagery">



<!-- Buy me a coffee -->
<script data-name="BMC-Widget" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="cullaloe" data-description="Helpful? Buy me a coffee!" data-message="" data-color="#5F7FFF" data-position="right" data-x_margin="18" data-y_margin="18"></script>
<!-- /Buy me a coffee -->

</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <p>cullaloe.com<br/>Tech, tales and imagery</p>
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/nick-hood.jpg" alt="Nick Hood"></a>
      </div>
      <!-- <div class="author-name">by <a href="/about" target="_self" class="plain">Nick Hood</a></div> -->
      <div class="search" id="js-search">
        <input type="text" placeholder="type to search..." class="search__input" id="js-search__input">
      </div>
    </div>
    <ul class="search__results" id="js-search__results"></ul>
</header> <!-- End Header -->

  <footer>
    <section class="contact">
      <h3 class="contact-title">Navigate</h3>
      <ul>
        <li><a href="/" target="_self" title="Home"><i class="fa fa-home" aria-hidden="true"></i></a></li>
        <li><a href="/about" target="_self" title="About"><i class="fa fa-info" aria-hidden="true"></i></a></li>
        <li><a href="/tags" target="_self" title="Tags and Topics"><i class="fa fa-tags" aria-hidden="true"></i></a></li>
        <li><a href="//static.cullaloe.net/Research" target="_blank" title="My research diary (login required)"><i class="fa fa-mortar-board" aria-hidden="true"></i></a></li>
        <li><a href="/feed.xml" target="_blank" title="RSS XML feed"><i class="fa fa-rss" aria-hidden="true"></i></a></li>
      </ul>
    </section> <!-- End Section links -->
    <section class="contact">
      <h3 class="contact-title">Connect</h3>
      <ul>
        
        <li><a href="https://orcid.org/0000-0001-7891-9736" target="_blank"><i class="ai ai-orcid-square" aria-hidden="true"></i></a></li>
        
        
        
        <li class="github"><a href="http://github.com/NixImagery" target="_blank"><i class="fab fa-github"></i></a></li>
        
        
        <li><a href="https://instagram.com/NixImagery" target="_blank"><i class="fab fa-instagram" aria-hidden="true"></i></a></li>
        
        
          <li><a href="https://mastodon.scot/@NixImagery" target="_blank"><i class="fab fa-mastodon" aria-hidden="true"></i></a></li>
        
        
        
          <li><a href="https://twitter.com/NixImagery" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i></a></li>
        
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2022 &copy; Nick Hood</p>
      <hr>Worried about online abuse? <a href="https://www.ceop.police.uk/safety-centre/">Report it to CEOP</a>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->

<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <figure>
        <img class="page-image" src=/assets/img/pirate-ship-at-sea.jpg alt="Statistics and Visualisation with R">
        
          <figcaption>Pirates
            
              <br/><div class="attrib">Public Domain</div>
            
          </figcaption>
        
      </figure>
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Statistics and Visualisation with R</h1>
        <div class="page-date"><span>2020, Jun 02&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <p>This is the first in a series of posts containing my notes from a course on Statistics and (data) Visualisation with R, presented by <a href="https://edinburgh.academia.edu/luciamichielin">Lucia Michielin</a> of the University of Edinburgh. The course is running two days a week in June and July.</p>

<p><strong>First week</strong></p>

<ul id="markdown-toc">
  <li><a href="#the-learning-environment" id="markdown-toc-the-learning-environment">The learning environment</a></li>
  <li><a href="#preparation" id="markdown-toc-preparation">Preparation</a></li>
  <li><a href="#programme-overview" id="markdown-toc-programme-overview">Programme overview</a></li>
  <li><a href="#class-1---intro-to-r-and-r-studio" id="markdown-toc-class-1---intro-to-r-and-r-studio">Class 1 - Intro to R and R studio</a>    <ul>
      <li><a href="#r-and-r-studio" id="markdown-toc-r-and-r-studio">R and R-Studio</a></li>
      <li><a href="#scientific-method" id="markdown-toc-scientific-method">Scientific method</a></li>
      <li><a href="#getting-our-hands-dirty" id="markdown-toc-getting-our-hands-dirty">Getting our hands dirty</a></li>
      <li><a href="#packages" id="markdown-toc-packages">Packages</a></li>
    </ul>
  </li>
  <li><a href="#class-2---types-of-data-and-grammar-of-graphs" id="markdown-toc-class-2---types-of-data-and-grammar-of-graphs">Class 2 - Types of data and Grammar of graphs</a>    <ul>
      <li><a href="#data-types" id="markdown-toc-data-types">Data types</a></li>
      <li><a href="#keeping-the-environment-clean" id="markdown-toc-keeping-the-environment-clean">Keeping the environment clean</a></li>
      <li><a href="#loading-data" id="markdown-toc-loading-data">Loading data</a></li>
      <li><a href="#graph-types" id="markdown-toc-graph-types">Graph types</a></li>
      <li><a href="#the-grammar-of-graphics" id="markdown-toc-the-grammar-of-graphics">The Grammar of graphics</a></li>
      <li><a href="#the-weekly-challenge" id="markdown-toc-the-weekly-challenge">The weekly challenge</a></li>
    </ul>
  </li>
  <li><a href="#next-class" id="markdown-toc-next-class">Next class</a></li>
  <li><a href="#notes-and-references" id="markdown-toc-notes-and-references">Notes and references</a></li>
</ul>

<h2 id="the-learning-environment">The learning environment</h2>
<p>The course was presented in a blended form using Collaborate, Blackboard Learn and Slack. These represent three key elements in a remote learning environment:</p>

<ul>
  <li>Synchronous, whole-class activity, usually instructor-led, but may include “break-out” sessions for students to work together in groups.</li>
  <li>A resources repository for files, course outlines, presenter’s notes and assignments.</li>
  <li>A back-channel for students to interact in, and for interaction with the course leader. This may be synchronous and asynchronous, but Slack is only used in this course for offline use. Collaborate chat is used in the live sessions.</li>
</ul>

<p>The offline chatter and forum space is useful in courses like this, which is why Slack is such a useful tool here. Microsoft teams has been suggested as an equivalent to Slack but I really don’t find it intuitive or useful in the same way as Slack. The UI, as with all Microsoft products I have ever used, is difficult and intrusive.</p>

<h2 id="preparation">Preparation</h2>
<p>The pre-course task is to <a href="https://www.r-project.org/">install R</a> and the <a href="https://rstudio.com/">R-Studio IDE</a>. I painlessly installed on my Mac R 4.0.0 “Arbor Day” and R-Studio 1.3.959, and downloaded the data files for the first week.</p>

<h2 id="programme-overview">Programme overview</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Class</th>
      <th style="text-align: left">Date and time</th>
      <th style="text-align: left">Title</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Class 1</td>
      <td style="text-align: left">01 June 13:00-14:30</td>
      <td style="text-align: left"><strong>Intro to R and R studio</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">Class 2</td>
      <td style="text-align: left">02 June 13:00-14:30</td>
      <td style="text-align: left"><strong>Types of data and Grammar of graphs</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">Class 3</td>
      <td style="text-align: left">08 June 13:00-14:30</td>
      <td style="text-align: left">Intro to statistics and descriptive stats</td>
    </tr>
    <tr>
      <td style="text-align: left">Class 4</td>
      <td style="text-align: left">09 June 13:00-14:30</td>
      <td style="text-align: left">Boxplot and playing with Colours</td>
    </tr>
    <tr>
      <td style="text-align: left">Class 5</td>
      <td style="text-align: left">15 June 13:00-14:30</td>
      <td style="text-align: left">Data Collection Bias, Probability, and Distribution</td>
    </tr>
    <tr>
      <td style="text-align: left">Class 6</td>
      <td style="text-align: left">18 June 13:00-14:30</td>
      <td style="text-align: left">Hypothesis testings and the main tests </td>
    </tr>
    <tr>
      <td style="text-align: left">Class 7</td>
      <td style="text-align: left">22 June 13:00-14:30</td>
      <td style="text-align: left">Barcharts and cleaning  the sample</td>
    </tr>
    <tr>
      <td style="text-align: left">Class 8</td>
      <td style="text-align: left">23 June 13:00-14:30</td>
      <td style="text-align: left">PCA and Cluster analysis</td>
    </tr>
    <tr>
      <td style="text-align: left">Class 9</td>
      <td style="text-align: left">29 June 13:00-14:30</td>
      <td style="text-align: left">Covariance, Regression, Similarity and Difference coefficients</td>
    </tr>
    <tr>
      <td style="text-align: left">Class 10</td>
      <td style="text-align: left">30 June 13:00-14:30</td>
      <td style="text-align: left">Recap and Bring your dataset class</td>
    </tr>
  </tbody>
</table>

<h2 id="class-1---intro-to-r-and-r-studio">Class 1 - Intro to R and R studio</h2>
<p>This began with an introduction on <a href="https://www.cdcs.ed.ac.uk/">The Edinburgh Centre for Data, Culture &amp; Society (CDCS)</a> and their other courses and research projects, followed by an introduction to our course leader, Lucia, and a walk around the VLE folders and files. Then, an overview of the first session:</p>

<ul>
  <li>Intro to Quantitative methods in Research</li>
  <li>The R and R studio Interface</li>
  <li>How to organise your work in R efficiently</li>
  <li>How to install packages</li>
</ul>

<p>This is fairly self-explanatory but an essential levelling for all delegates on the course, who come from a range of backgrounds. Most seemed to be researchers.</p>

<h3 id="r-and-r-studio">R and R-Studio</h3>
<p>R is the language, and R-Studio is a graphical IDE for working with projects and data using R. Lucia said that the key skill in acquiring a new language is knowing how to Google: R is widely used and has a large user base and the forums are very helpful in quickly overcoming problems.</p>

<h3 id="scientific-method">Scientific method</h3>
<p>We heard about the scientific method and in particular the issue of correlation vs. causation. This, in context of remaining close to the process, and the meaning of the data, whilst engaging deeply with the IDE.</p>

<ul>
  <li>Define a research question</li>
  <li>Explore the evidence</li>
  <li>Define working hypotheses</li>
  <li>Translate hypotheses → statistical models</li>
  <li>Compare models to evidence</li>
  <li>Interpret results</li>
</ul>

<p><img src="/assets/img/correlation.png" alt="" /></p>

<h3 id="getting-our-hands-dirty">Getting our hands dirty</h3>
<p>Finally we got to open R-Studio and follow Lucia through opening the script for today and take a walk around the IDE. We started with creating a new project and setting up a folder organisation for the course, then played with settings to make the IDE more comfortable for us.</p>

<p>Comments and header syntax was explained, then using an immediate mode of running commands in the console (by pressing cmd-enter). Outputs are presented in vectors: index 1.</p>

<pre><code class="language-R"># THIS IS A LEVEL 1 HEADER #################################

## This Is a Level 2 Header ================================

### This is a level 3 header. ------------------------------

print('Hello World!')

## Define Variables ================
x &lt;- 1:5 #Put the numbers between 1-5 in the variable x (alt- is a short code for &lt;- in the IDE)
x #Displays the values we have set in x
</code></pre>
<p>Getting help is a matter of issuing a query command: e.g. <code>?datasets</code> displays help on the Datasets package.</p>

<h3 id="packages">Packages</h3>

<p>Packages are installed and activated thus:</p>
<pre><code class="language-R">install.packages("ggplot2")
?install.packages  # Get help on installing packages

## Activate packages ==========================
library(ggplot2)
</code></pre>
<p>We ended the session by installing something called the “Tidyverse”, which seems to be a collection of useful packages. It calls itself an “opinionated collection of R packages designed for data science”.</p>

<h2 id="class-2---types-of-data-and-grammar-of-graphs">Class 2 - Types of data and Grammar of graphs</h2>

<ul>
  <li>Type of Data</li>
  <li>How to load data</li>
  <li>How to choose the right Graph</li>
  <li>Graph types</li>
  <li>The Grammar of Graphs</li>
  <li>Ggplot2  structure</li>
  <li>Graph settings</li>
</ul>

<h3 id="data-types">Data types</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Vector</td>
      <td style="text-align: left">One dimensional collection of data, like a column or row, all of the same type</td>
    </tr>
    <tr>
      <td style="text-align: left">Matrix</td>
      <td style="text-align: left">Two-dimensional collection of data, all of the same type</td>
    </tr>
    <tr>
      <td style="text-align: left">Array</td>
      <td style="text-align: left">Multi-dimensional collection of data, all of the same type</td>
    </tr>
    <tr>
      <td style="text-align: left">Data frame</td>
      <td style="text-align: left">Mixed type variables (similar to a table in spreadsheet)</td>
    </tr>
  </tbody>
</table>

<p>Reading a table by convention has <em>variables</em> in columns, and the <em>observations</em> or data values are in the rows. Vectors, arrays and matrices in R all must contain the same data type, and a data frame is the only construct that allows mixed types.</p>

<h3 id="keeping-the-environment-clean">Keeping the environment clean</h3>

<pre><code class="language-R"># Clear environment
rm(list = ls())

# Clear console
cat("\014")  # ctrl+L
</code></pre>

<h3 id="loading-data">Loading data</h3>
<pre><code class="language-R">df &lt;- read_csv("data/RodentSimplified.csv")

# ... same, with selection and mutation of month column name:

df2 &lt;- read_csv("data/RodentSimplified.csv") %&gt;%
  select(mo,dy,yr,period,species) %&gt;% 
  mutate(period = as.factor(period)) %&gt;%
  rename(month = mo) %&gt;%
  print()
</code></pre>
<p>What looks like a continuation line in the above code block is called a “pipe”, written <code>%&gt;%</code>. A pipe is much more than just for making the code look pretty: it really does work as a pipe to transfer a value between subsequent function calls. See <a href="https://style.tidyverse.org/pipes.html">this</a> and <a href="https://magrittr.tidyverse.org/">this</a> and <a href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html">this</a> for more details.</p>

<h3 id="graph-types">Graph types</h3>
<p>After some warnings on selecting data presentation that is consistent with your intention to actually communicate something, and not to show off, Lucia introduced us to some of the graph types available with R. She gave us a really nice demonstration why many journals prefer data presentation (e.g. ratios) as a bar chart rather than a pie chart. Differences are sometimes clearer in the bar chart. Apparently, Florence Nightingale invented the pie chart!</p>

<h3 id="the-grammar-of-graphics">The Grammar of graphics</h3>
<p>The <code>ggplot</code> function allows the creation of graphs according to the framework outlined by Wilkinson<sup id="fnref:Wilkinson" role="doc-noteref"><a href="#fn:Wilkinson" class="footnote" rel="footnote">1</a></sup> in which the separate aspects of data presentation are dealt with separately. A basic template is described <a href="https://homepage.divms.uiowa.edu/~luke/classes/STAT4580/ggplot.html">here</a> with examples for <code>ggplot</code>. My take on the framework is:</p>

<ol>
  <li>a <strong>data</strong> set</li>
  <li><strong>aesthetics</strong> = a set of scales and variables to be plotted</li>
  <li><strong>geometry</strong> = shapes to represent the data and the type of chart</li>
  <li>a grid of subplots, or <strong>facets</strong></li>
  <li><strong>statistics</strong> = summaries of the data</li>
  <li><strong>coordinates</strong> to define the plotting space</li>
  <li>global <strong>themes</strong> and labels to make it look pretty</li>
</ol>

<p>Some of these map into the <code>ggplot</code> function, from the most basic (using examples from the weekly challenge, below):</p>

<pre><code class="language-R">ggplot(college, aes(x=sat_avg, y=admission_rate)) + geom_point()
</code></pre>
<p>Here, the <code>aes</code> part is the aesthetics definition of the variables for the plot; <code>geom_point</code> defines the type of chart (scatter plot), and <code>college</code> is the data set.</p>

<h3 id="the-weekly-challenge">The weekly challenge</h3>
<p>I completely failed to get anything at all out of the challenge in the 5 minutes we were given for this task. My code just didn’t produce any kind of plot, just barffing errors at me. This was entirely down to my inability to type or read carefully what I had typed. Later, I managed to make some progress:</p>

<pre><code class="language-R"># Import CSV files from online repo
college &lt;- read_csv('http://672258.youcanlearnit.net/college.csv')
college &lt;- college %&gt;%
  mutate(state=as.factor(state), region=as.factor(region),
         highest_degree=as.factor(highest_degree),
         control=as.factor(control), gender=as.factor(gender),
         loan_default_rate=as.numeric(loan_default_rate))
# Create a chart that would show the relationship between the SAT average and the admission rate 
ggplot(college, aes(x=sat_avg, y=admission_rate)) + geom_point()
</code></pre>
<p>Time is not in abundance at the moment, so I did eventually just look at the solution and run it, seeing how each element of the code contributed to the final result. Here’s my result:</p>

<p><img src="/assets/img/Challenge_1.png" alt="" /></p>

<!--see slides and link the book-->

<h2 id="next-class">Next class</h2>

<ul>
  <li>Discuss the results of the challenge</li>
  <li>Intro to Statistics</li>
  <li>Descriptive Statistics</li>
  <li>Summarising Statistics</li>
  <li>Exploring 1 variable: Plotting distribution Histograms and Density plot</li>
</ul>

<h2 id="notes-and-references">Notes and references</h2>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:Wilkinson" role="doc-endnote">
      <p>Wilkinson, L. (2005) The Grammar of Graphics, The Grammar of Graphics. Springer-Verlag. doi: 10.1007/0-387-28695-0. <a href="#fnref:Wilkinson" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

      <div class="page-footer">
        <div class="page-share">Share this post on 
          <a href="https://twitter.com/intent/tweet?text=Statistics and Visualisation with R&url=http://localhost:4000/R-data-visualisation-course-1" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a> or 
          <a href="https://facebook.com/sharer.php?u=http://localhost:4000/R-data-visualisation-course-1" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>, or maybe 
          <a target="_blank" href="https://www.buymeacoffee.com/cullaloe">Buy me a coffee</a>
        </div>
        <div class="page-tag">
          
            <a href="/tags#Data" class="tag">&#35; Data</a>
          
            <a href="/tags#R" class="tag">&#35; R</a>
          
            <a href="/tags#CPD" class="tag">&#35; CPD</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//cullaloe-gh.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-29333042-8', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

	<!-- Scripts -->
  <!-- Search Js -->
<script src="/assets/js/search.js"></script>
  
</body>
</html>
